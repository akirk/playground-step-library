<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WordPress Playground Step Library</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=EB+Garamond&family=Inter&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="module" src="script.js"></script>
	<script>
		addEventListener('DOMContentLoaded', function() {
			// Options toggle
			document.getElementById('toggle-further-options').addEventListener('click', function() {
				const details = document.getElementById('further-options');
				if (details.open) {
					details.removeAttribute('open');
				} else {
					details.setAttribute('open', '');
				}
			});

			// Mobile step library toggle
			const mobileButton = document.getElementById('mobile-show-steps');
			const stepLibraryHolder = document.getElementById('step-library-holder');
			const filterHolder = document.getElementById('filter-holder');

			// Toggle step library
			if (mobileButton) {
				mobileButton.addEventListener('click', function() {
					stepLibraryHolder.classList.add('mobile-visible');
				});
			}

			// Close on back button click (via ::before pseudo-element)
			if (filterHolder) {
				filterHolder.addEventListener('click', function(e) {
					if (window.innerWidth <= 734 && e.target === filterHolder) {
						stepLibraryHolder.classList.remove('mobile-visible');
					}
				});
			}
		});
	</script>
</head>

<body>
	<header>
		<div class="header-row">
			<h1>WordPress Playground Step Library</h1>
			<span id="top-buttons">
				<button id="clear">Clear Steps</button>
				<select id="examples">
					<option>Examples</option>
				</select>
				<select id="preview-mode">
					<option value="">No Preview</option>
					<option value="bottom">Preview Bottom</option>
					<option value="right">Preview Right</option>
				</select>
				<button id="wizard-mode-toggle">ü™Ñ Wizard Mode</button>
				<span id="options-wrapper">
					<button id="toggle-further-options">‚öôÔ∏è Options</button>
					<details id="further-options">
						<summary style="display:none;">Further Options</summary>
						<div>
							<label>Blueprint Title: <input type="text" id="title" name="title" placeholder="Title"></label>
							<label><input type="checkbox" id="phpExtensionBundles" value="kitchen-sink">Use all <a
									href="https://wordpress.github.io/wordpress-playground/blueprints/data-format#php-extensions"
									target="_blank">available PHP extensions</a></label>
							<label>WordPress <select id="wp-version">
									<option value="latest">latest</option>
									<option value="6.4">6.4</option>
									<option value="6.5">6.5</option>
									<option value="6.6">6.6</option>
									<option value="beta">beta</option>
									<option value="nightly">nightly</option>
								</select></label>
							<label>PHP <select id="php-version">
									<option value="latest">latest</option>
									<option value="7.4">7.4</option>
									<option value="8.0">8.0</option>
									<option value="8.1">8.1</option>
									<option value="8.2">8.2</option>
									<option value="8.3">8.3</option>
								</select></label>
							<label><a href="https://wordpress.github.io/wordpress-playground/developers/apis/query-api/"
									target="_blank">Environment Mode:</a>
								<select id="mode">
									<option value="browser-full-screen">Fake Browser (full screen)</option>
									<option value="browser">Fake Browser</option>
									<option value="seamless">Seamless</option>
								</select></label>
							<label>Storage <select id="storage">
									<option value="none">None (Changes get lost)</option>
									<option value="browser">Browser</option>
									<option value="device">Device</option>
								</select></label>
							<label>Playground <select id="playground">
									<option value="playground.wordpress.net">playground.wordpress.net</option>
									<option value="http://127.0.0.1:5400/website-server">http://127.0.0.1:5400/website-server</option>
								</select></label>
							<label><input type="checkbox" id="base64" value="true">base64 encode blueprint</label>
							<label>Autosave <input type="text" id="autosave" placeholder="Enter a name"
									pattern="[a-z0-9][a-z0-9-]+"></label>
						</div>
					</details>
				</span>
				<a href="#" id="playground-link-top" target="_blank">Launch in Playground</a>
				<button id="copy-playground-link-top">‚ßâ</button>
			</span>
		</div>
		<p>Drag or click the steps to create a <a
			href="https://wordpress.github.io/wordpress-playground/blueprints/"
			target="_blank">blueprint</a> for <a href="https://wordpress.github.io/wordpress-playground/"
			target="_blank">WordPress Playground</a>. You can <a
			href="https://github.com/akirk/playground-step-library/#contributing">create and submit your own steps!</a></p>
	</header>
	<div id="split-view-wrapper">
		<div id="blueprint-builder">
			<div id="steps-holder">
				<div id="steps-group">
					<div id="step-library-holder">
						<div id="filter-holder"><input type="text" id="filter" placeholder="Filter"> <label><input
									type="checkbox" id="show-builtin" checked> Builtin</label></div>
						<div id="step-library"></div>
					</div>
					<div id="blueprint-steps">
						<div id="draghint">Click or drag the steps to add them here.</div>
					</div>
					<button id="mobile-show-steps" class="mobile-only">+ Add Steps</button>
				</div>
			</div>
			<div class="arrow">‚Üí</div>
			<div id="blueprint-compiled-holder">
				<div>Transformed Blueprint</div>
				<textarea id="blueprint-compiled"></textarea>
				<div id="blueprint-version-selector">
					<label><input type="radio" name="blueprint-version" value="v1" checked> Blueprint v1</label>
					<label><input type="radio" name="blueprint-version" value="v2"> Blueprint v2</label>
				</div>
				<div id="playground-link-holder"><a href="#" id="playground-link" target="_blank">Launch in Playground</a>
					<button id="copy-playground-link">‚ßâ</button></div>
				<a href="#" id="download-blueprint" download="blueprint.json" target="_blank">Download Blueprint</a>
			</div>
		</div>

		<div id="split-view-container" style="display: none;">
			<iframe id="playground-iframe" src="" frameborder="0"></iframe>
		</div>
	</div>

	<div id="wizard-container" style="display: none;">
		<div id="wizard-header">
			<div id="wizard-progress">
				<div class="wizard-step-indicator active" data-step="1">
					<span class="step-number">1</span>
					<span class="step-title">Plugins & Themes</span>
				</div>
				<div class="wizard-step-indicator" data-step="2">
					<span class="step-number">2</span>
					<span class="step-title">Content & Setup</span>
				</div>
				<div class="wizard-step-indicator" data-step="3">
					<span class="step-number">3</span>
					<span class="step-title">Configure</span>
				</div>
				<div class="wizard-step-indicator" data-step="4">
					<span class="step-number">4</span>
					<span class="step-title">Name & Launch</span>
				</div>
			</div>
			<button id="wizard-close">‚úï Exit Wizard</button>
		</div>

		<div id="wizard-content">
			<!-- Step 1: Plugins & Themes -->
			<div class="wizard-step" id="wizard-step-1">
				<h2>üîå What plugins and themes would you like?</h2>
				<p>Enter the URLs or WordPress.org slugs for plugins and themes you want to install.</p>

				<div class="wizard-step-categories">
					<div class="wizard-category">
						<h3>üîå Plugins</h3>
						<div class="wizard-url-input-group">
							<div class="wizard-form-group">
								<input type="text" id="plugin-url-input" placeholder="e.g., woocommerce, jetpack, or github URL..." />
								<button type="button" id="add-plugin-btn">Add Plugin</button>
							</div>
							<small>Enter WordPress.org plugin slug (e.g., "woocommerce") or full GitHub URL</small>
						</div>
						<div class="wizard-selected-items">
							<h4>Selected Plugins</h4>
							<div id="wizard-selected-plugins"></div>
						</div>
					</div>

					<div class="wizard-category">
						<h3>üé® Themes</h3>
						<div class="wizard-url-input-group">
							<div class="wizard-form-group">
								<input type="text" id="theme-url-input" placeholder="e.g., twentytwentyfour, or github URL..." />
								<button type="button" id="add-theme-btn">Add Theme</button>
							</div>
							<small>Enter WordPress.org theme slug (e.g., "twentytwentyfour") or full GitHub URL</small>
						</div>
						<div class="wizard-selected-items">
							<h4>Selected Themes</h4>
							<div id="wizard-selected-themes"></div>
						</div>
					</div>
				</div>
			</div>

			<!-- Step 2: Content & Setup -->
			<div class="wizard-step" id="wizard-step-2" style="display: none;">
				<h2>üìÅ What content and setup do you need?</h2>
				<p>Choose additional features like user accounts, file uploads, or advanced configuration.</p>

				<div class="wizard-step-categories">
					<div class="wizard-category">
						<h3>üìÅ Content & Files</h3>
						<div class="wizard-step-grid" id="wizard-content-steps"></div>
					</div>
					<div class="wizard-category">
						<h3>‚öôÔ∏è Site Configuration</h3>
						<div class="wizard-step-grid" id="wizard-config-steps"></div>
					</div>
					<div class="wizard-category">
						<h3>üõ†Ô∏è Advanced Features</h3>
						<div class="wizard-step-grid" id="wizard-advanced-steps"></div>
					</div>
				</div>

				<div class="wizard-selected-steps">
					<h3>Selected Features</h3>
					<div id="wizard-selected-list-2"></div>
				</div>
			</div>

			<!-- Step 3: Configure -->
			<div class="wizard-step" id="wizard-step-3" style="display: none;">
				<h2>‚öôÔ∏è Configure Your Steps</h2>
				<p>Let's set up the details for each step you've selected.</p>

				<div id="wizard-configuration-area">
					<!-- Step configurations will be inserted here -->
				</div>
			</div>

			<!-- Step 4: Name & Launch -->
			<div class="wizard-step" id="wizard-step-4" style="display: none;">
				<h2>‚úì Name your blueprint and apply!</h2>
				<p>Give your blueprint a title and we'll add everything to the blueprint builder.</p>

				<div class="wizard-form-group">
					<label for="wizard-title">What title do you want to give this blueprint?</label>
					<input type="text" id="wizard-title" placeholder="My WordPress Setup" />
					<small>This helps you identify your blueprint later</small>
				</div>

				<div class="wizard-summary">
					<div class="wizard-summary-section">
						<h3>üìã Summary</h3>
						<div id="wizard-summary-all"></div>
					</div>
					<div class="wizard-summary-section">
						<h3>üóÇÔ∏è Blueprint Preview</h3>
						<textarea id="wizard-final-blueprint" readonly></textarea>
					</div>
				</div>
			</div>
		</div>

		<div id="wizard-navigation">
			<button id="wizard-prev" disabled>‚Üê Previous</button>
			<div id="wizard-step-info">
				<span id="wizard-current-step">1</span> of <span id="wizard-total-steps">4</span>
			</div>
			<button id="wizard-next">Next ‚Üí</button>
			<button id="wizard-finish" style="display: none;">‚úì Apply to Builder</button>
		</div>
	</div>

	<dialog id="view-source">
		<h2></h2>
		<iframe src="" frameborder="0" name="source-iframe"></iframe>
	</dialog>

	<dialog id="save-step">
		<h2>Save to your Personal Step Library</h2>
		<p>This will appear in the list of steps, you can delete or modify it there.</p>
		<label>Step Name: <input type="text" id="my-step-name" size="40"></label><br>
		<button>Save</button>
	</dialog>

	<dialog id="code-editor">
		<p>The textarea will be automatically updated with what you type.</p>
		<textarea id="linked-textarea"></textarea>
		<br>
		<button>Close</button>
	</dialog>

	<dialog id="autoredirecting">
		<p>Redirecting to a pre-configured WordPress Playground</p>
		<p><strong id="autoredirect-title"></strong></p>
		<p>in <span id="autoredirecting-seconds">3 seconds</span>...</p>
		<div>
			<button id="redirect-now">Launch in Playground now</button><button id="autoredirect-cancel">Cancel</button>
		</div>
	</dialog>
</body>

</html>
