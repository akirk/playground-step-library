/* Modern Ace Editor Styling */
.ace_editor {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace !important;
  line-height: 1.6 !important;
}

.ace_gutter {
  background: light-dark(#fafbfc, #1e1e1e) !important;
  border-right: 1px solid light-dark(#e9ecef, #333333) !important;
}

.ace_gutter-cell {
  color: light-dark(#6c757d, #858585) !important;
}

.ace_gutter-active-line {
  background-color: light-dark(#f0f0f0, #2a2a2a) !important;
}

.ace_scroller {
  background-color: light-dark(#ffffff, #1e1e1e) !important;
}

.ace_content {
  padding: 0 !important;
  margin: 0 !important;
}

.ace_line {
  padding: 0 !important;
  margin: 0 !important;
}

.ace_active-line {
  background: light-dark(rgba(0, 122, 255, 0.03), rgba(0, 122, 255, 0.1)) !important;
}

.ace_cursor {
  color: light-dark(#000000, #ffffff) !important;
  border-left: 2px solid light-dark(#000000, #ffffff) !important;
}

/* Ace Status Bar */
.ace-status-bar {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: 16px;
  padding: 4px 12px;
  padding-right: 28px;
  background: light-dark(#f8f9fa, #252525);
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-size: 11px;
  color: light-dark(#6c757d, #858585);
  height: 24px;
  box-sizing: border-box;
}

.ace-status-bar .status-info {
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.ace-status-bar .status-warning {
  color: light-dark(var(--warning-700), var(--warning-300));
  font-weight: 700;
  font-size: 12px;
  flex-shrink: 0;
  white-space: nowrap;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.ace-status-bar .status-warning::before {
  content: '⏸ Compilation Paused';
}

.ace-status-bar .status-warning:hover {
  background-color: light-dark(rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.2));
  color: light-dark(rgb(21, 128, 61), rgb(134, 239, 172));
}

.ace-status-bar .status-warning:hover::before {
  content: '▶ Resume (changes will be lost!)';
}

.ace-status-bar .status-mode {
  text-transform: uppercase;
  font-weight: 600;
  color: light-dark(#495057, #adb5bd);
  margin-left: auto;
  flex-shrink: 0;
}

#code-editor-status {
  margin-top: 0;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  overflow: hidden;
  border: 1px solid light-dark(#e9ecef, #333333);
  border-top: none;
  box-shadow: 0 1px 3px light-dark(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3));
}

#blueprint-status {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: none;
  z-index: 10;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  overflow: hidden;
  border: 1px solid light-dark(#e9ecef, #333333);
  border-top: none;
  box-shadow: 0 1px 3px light-dark(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3));
}

#blueprint-status.active {
  display: flex;
}

button.code-editor {
  margin-left: var(--spacing-2);
  padding: var(--spacing-2) var(--spacing-3);
  font-size: var(--font-size-xs);
  vertical-align: middle;
}

#autoredirecting {
  text-align: center;
}
#autoredirecting div {
  display: flex;
  justify-content: space-around;
}

@media (max-width: 734px) {
  body {
    padding: var(--spacing-2);
  }

  header {
    margin-bottom: var(--spacing-4);
  }

  #blueprint-builder {
    flex-direction: column;
    width: 100%;
    padding: 0;
    margin: 0;
    gap: 0;
  }

  #title-holder {
    margin: 0 0 var(--spacing-4) 0;
    padding: var(--spacing-3);
  }

  .header-row {
    flex-wrap: wrap;
  }

  header h1 {
    font-size: var(--font-size-2xl);
    width: 100%;
    margin-bottom: var(--spacing-3);
  }


  #blueprint-steps .step a.view-source {
    display: none;
  }

  #options-wrapper {
    position: static;
  }

  #further-options {
    position: fixed;
    left: var(--spacing-2);
    right: var(--spacing-2);
    top: auto;
    min-width: auto;
    max-width: none;
    width: auto;
  }

  /* Hide the arrow on mobile */
  .arrow {
    display: none !important;
  }

  #steps-holder {
    width: 100%;
  }

  #steps-group {
    flex-direction: column;
    position: relative;
  }

  #step-library-holder {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    border-radius: 0;
    border: none;
    display: none;
  }

  #step-library-holder.mobile-visible {
    display: block;
  }

  #blueprint-steps {
    width: 100%;
    min-height: auto;
    border-radius: var(--radius-xl);
    border: 1px solid var(--border-color);
  }

  #mobile-show-steps {
    width: 100%;
    margin-top: var(--spacing-2);
    padding: var(--spacing-4);
    background: var(--primary-500);
    color: white;
    border: 1px solid var(--primary-500);
    font-weight: var(--font-weight-semibold);
    box-shadow: var(--shadow-md);
    border-radius: var(--radius-lg);
  }

  #mobile-show-steps:hover {
    background: var(--primary-600);
    border-color: var(--primary-600);
  }

  #draghint {
    display: none;
  }

  #filter-holder {
    position: sticky;
    top: 0;
    z-index: 10;
    padding-left: 60px;
  }

  #filter-holder::before {
    content: '← Back';
    position: absolute;
    left: var(--spacing-2);
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    font-weight: var(--font-weight-semibold);
    color: var(--primary-600);
    padding: var(--spacing-2);
  }

  #filter-holder input[type="text"] {
    width: 100%;
  }

  /* Show the mobile button */
  .mobile-only {
    display: block !important;
  }

  /* Compiled blueprint section on mobile */
  #blueprint-compiled-holder {
    width: 100%;
    margin: var(--spacing-4) 0 0 0;
    padding: var(--spacing-3);
    border-radius: var(--radius-lg);
    box-sizing: border-box;
  }

  #blueprint-compiled-holder > div {
    margin-bottom: var(--spacing-2);
    font-size: var(--font-size-base);
  }

  #blueprint-version-selector {
    margin-top: var(--spacing-2);
    margin-bottom: var(--spacing-2);
  }

  textarea#blueprint-compiled {
    height: 300px;
    padding: var(--spacing-2);
    font-size: var(--font-size-xs);
    width: 100%;
    box-sizing: border-box;
  }

  #blueprint-compiled-wrapper {
    height: 300px !important;
  }

  #blueprint-compiled-ace {
    bottom: 24px;
  }

  /* Make buttons full width on mobile */
  #playground-link-holder {
    flex-direction: row;
    margin-top: var(--spacing-2);
    gap: var(--spacing-2);
    width: 100%;
  }

  #playground-link {
    flex: 1;
    padding: var(--spacing-3) var(--spacing-4);
    box-sizing: border-box;
  }

  #download-blueprint {
    margin-top: 0;
  }
}

